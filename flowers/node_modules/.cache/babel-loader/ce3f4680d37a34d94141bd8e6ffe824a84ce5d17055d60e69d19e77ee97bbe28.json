{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nrequire('../../../../utils/index.js');\nvar utils = require('../utils.js');\nvar types = require('../../../../utils/types.js');\nvar style = require('../../../../utils/dom/style.js');\nconst useStyles = (props, {\n  columnsTotalWidth,\n  data,\n  fixedColumnsOnLeft,\n  fixedColumnsOnRight\n}) => {\n  const bodyWidth = vue.computed(() => {\n    const {\n      fixed,\n      width,\n      vScrollbarSize\n    } = props;\n    const ret = width - vScrollbarSize;\n    return fixed ? Math.max(Math.round(vue.unref(columnsTotalWidth)), ret) : ret;\n  });\n  const headerWidth = vue.computed(() => vue.unref(bodyWidth) + props.vScrollbarSize);\n  const mainTableHeight = vue.computed(() => {\n    const {\n      height = 0,\n      maxHeight = 0,\n      footerHeight: footerHeight2,\n      hScrollbarSize\n    } = props;\n    if (maxHeight > 0) {\n      const _fixedRowsHeight = vue.unref(fixedRowsHeight);\n      const _rowsHeight = vue.unref(rowsHeight);\n      const _headerHeight = vue.unref(headerHeight);\n      const total = _headerHeight + _fixedRowsHeight + _rowsHeight + hScrollbarSize;\n      return Math.min(total, maxHeight - footerHeight2);\n    }\n    return height - footerHeight2;\n  });\n  const rowsHeight = vue.computed(() => {\n    const {\n      rowHeight,\n      estimatedRowHeight\n    } = props;\n    const _data = vue.unref(data);\n    if (types.isNumber(estimatedRowHeight)) {\n      return _data.length * estimatedRowHeight;\n    }\n    return _data.length * rowHeight;\n  });\n  const fixedTableHeight = vue.computed(() => {\n    const {\n      maxHeight\n    } = props;\n    const tableHeight = vue.unref(mainTableHeight);\n    if (types.isNumber(maxHeight) && maxHeight > 0) return tableHeight;\n    const totalHeight = vue.unref(rowsHeight) + vue.unref(headerHeight) + vue.unref(fixedRowsHeight);\n    return Math.min(tableHeight, totalHeight);\n  });\n  const mapColumn = column => column.width;\n  const leftTableWidth = vue.computed(() => utils.sum(vue.unref(fixedColumnsOnLeft).map(mapColumn)));\n  const rightTableWidth = vue.computed(() => utils.sum(vue.unref(fixedColumnsOnRight).map(mapColumn)));\n  const headerHeight = vue.computed(() => utils.sum(props.headerHeight));\n  const fixedRowsHeight = vue.computed(() => {\n    var _a;\n    return (((_a = props.fixedData) == null ? void 0 : _a.length) || 0) * props.rowHeight;\n  });\n  const windowHeight = vue.computed(() => {\n    return vue.unref(mainTableHeight) - vue.unref(headerHeight) - vue.unref(fixedRowsHeight);\n  });\n  const rootStyle = vue.computed(() => {\n    const {\n      style = {},\n      height,\n      width\n    } = props;\n    return utils.enforceUnit({\n      ...style,\n      height,\n      width\n    });\n  });\n  const footerHeight = vue.computed(() => utils.enforceUnit({\n    height: props.footerHeight\n  }));\n  const emptyStyle = vue.computed(() => ({\n    top: style.addUnit(vue.unref(headerHeight)),\n    bottom: style.addUnit(props.footerHeight),\n    width: style.addUnit(props.width)\n  }));\n  return {\n    bodyWidth,\n    fixedTableHeight,\n    mainTableHeight,\n    leftTableWidth,\n    rightTableWidth,\n    headerWidth,\n    rowsHeight,\n    windowHeight,\n    footerHeight,\n    emptyStyle,\n    rootStyle,\n    headerHeight\n  };\n};\nexports.useStyles = useStyles;","map":{"version":3,"names":["useStyles","props","columnsTotalWidth","data","fixedColumnsOnLeft","fixedColumnsOnRight","bodyWidth","vue","computed","fixed","width","vScrollbarSize","ret","Math","max","round","unref","headerWidth","mainTableHeight","height","maxHeight","footerHeight","footerHeight2","hScrollbarSize","_fixedRowsHeight","fixedRowsHeight","_rowsHeight","rowsHeight","_headerHeight","headerHeight","total","min","rowHeight","estimatedRowHeight","_data","types","isNumber","length","fixedTableHeight","tableHeight","totalHeight","mapColumn","column","leftTableWidth","utils","sum","map","rightTableWidth","_a","fixedData","windowHeight","rootStyle","style","enforceUnit","emptyStyle","top","addUnit","bottom"],"sources":["../../../../../../../packages/components/table-v2/src/composables/use-styles.ts"],"sourcesContent":["import { computed, unref } from 'vue'\nimport { addUnit, isNumber } from '@element-plus/utils'\nimport { enforceUnit, sum } from '../utils'\n\nimport type { CSSProperties } from 'vue'\nimport type { TableV2Props } from '../table'\nimport type { UseColumnsReturn } from './use-columns'\nimport type { UseDataReturn } from './use-data'\n\ntype UseStyleProps = {\n  columnsTotalWidth: UseColumnsReturn['columnsTotalWidth']\n  data: UseDataReturn['data']\n  fixedColumnsOnLeft: UseColumnsReturn['fixedColumnsOnLeft']\n  fixedColumnsOnRight: UseColumnsReturn['fixedColumnsOnRight']\n}\n\nexport const useStyles = (\n  props: TableV2Props,\n  {\n    columnsTotalWidth,\n    data,\n    fixedColumnsOnLeft,\n    fixedColumnsOnRight,\n  }: UseStyleProps\n) => {\n  const bodyWidth = computed(() => {\n    const { fixed, width, vScrollbarSize } = props\n    const ret = width - vScrollbarSize\n    return fixed ? Math.max(Math.round(unref(columnsTotalWidth)), ret) : ret\n  })\n\n  const headerWidth = computed(() => unref(bodyWidth) + props.vScrollbarSize)\n\n  const mainTableHeight = computed(() => {\n    const { height = 0, maxHeight = 0, footerHeight, hScrollbarSize } = props\n\n    if (maxHeight > 0) {\n      const _fixedRowsHeight = unref(fixedRowsHeight)\n      const _rowsHeight = unref(rowsHeight)\n      const _headerHeight = unref(headerHeight)\n      const total =\n        _headerHeight + _fixedRowsHeight + _rowsHeight + hScrollbarSize\n\n      return Math.min(total, maxHeight - footerHeight)\n    }\n\n    return height - footerHeight\n  })\n\n  const rowsHeight = computed(() => {\n    const { rowHeight, estimatedRowHeight } = props\n    const _data = unref(data)\n    if (isNumber(estimatedRowHeight)) {\n      return _data.length * estimatedRowHeight\n    }\n\n    return _data.length * rowHeight\n  })\n\n  const fixedTableHeight = computed(() => {\n    const { maxHeight } = props\n    const tableHeight = unref(mainTableHeight)\n    if (isNumber(maxHeight) && maxHeight > 0) return tableHeight\n\n    const totalHeight =\n      unref(rowsHeight) + unref(headerHeight) + unref(fixedRowsHeight)\n\n    return Math.min(tableHeight, totalHeight)\n  })\n\n  const mapColumn = (column: TableV2Props['columns'][number]) => column.width\n\n  const leftTableWidth = computed(() =>\n    sum(unref(fixedColumnsOnLeft).map(mapColumn))\n  )\n\n  const rightTableWidth = computed(() =>\n    sum(unref(fixedColumnsOnRight).map(mapColumn))\n  )\n\n  const headerHeight = computed(() => sum(props.headerHeight))\n\n  const fixedRowsHeight = computed(() => {\n    return (props.fixedData?.length || 0) * props.rowHeight\n  })\n\n  const windowHeight = computed(() => {\n    return unref(mainTableHeight) - unref(headerHeight) - unref(fixedRowsHeight)\n  })\n\n  const rootStyle = computed<CSSProperties>(() => {\n    const { style = {}, height, width } = props\n    return enforceUnit({\n      ...style,\n      height,\n      width,\n    })\n  })\n\n  const footerHeight = computed(() =>\n    enforceUnit({ height: props.footerHeight })\n  )\n\n  const emptyStyle = computed<CSSProperties>(() => ({\n    top: addUnit(unref(headerHeight)),\n    bottom: addUnit(props.footerHeight),\n    width: addUnit(props.width),\n  }))\n\n  return {\n    bodyWidth,\n    fixedTableHeight,\n    mainTableHeight,\n    leftTableWidth,\n    rightTableWidth,\n    headerWidth,\n    rowsHeight,\n    windowHeight,\n    footerHeight,\n    emptyStyle,\n    rootStyle,\n    headerHeight,\n  }\n}\n\nexport type UseStyleReturn = ReturnType<typeof useStyles>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}