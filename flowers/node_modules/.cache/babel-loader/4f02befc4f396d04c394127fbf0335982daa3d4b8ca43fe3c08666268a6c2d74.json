{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.push.js\");\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar dom = require('@floating-ui/dom');\nrequire('../../../hooks/index.js');\nrequire('../../visual-hidden/index.js');\nvar constants = require('./constants.js');\nvar content = require('./content.js');\nvar common = require('./common.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../hooks/use-floating/index.js');\nvar index$1 = require('../../../hooks/use-z-index/index.js');\nvar index$2 = require('../../../hooks/use-namespace/index.js');\nvar visualHidden = require('../../visual-hidden/src/visual-hidden2.js');\nconst _hoisted_1 = [\"data-side\"];\nconst __default__ = vue.defineComponent({\n  name: \"ElTooltipV2Content\"\n});\nconst _sfc_main = /* @__PURE__ */vue.defineComponent({\n  ...__default__,\n  props: {\n    ...content.tooltipV2ContentProps,\n    ...common.tooltipV2CommonProps\n  },\n  setup(__props) {\n    const props = __props;\n    const {\n      triggerRef,\n      contentId\n    } = vue.inject(constants.tooltipV2RootKey);\n    const placement = vue.ref(props.placement);\n    const strategy = vue.ref(props.strategy);\n    const arrowRef = vue.ref(null);\n    const {\n      referenceRef,\n      contentRef,\n      middlewareData,\n      x,\n      y,\n      update\n    } = index.useFloating({\n      placement,\n      strategy,\n      middleware: vue.computed(() => {\n        const middleware = [dom.offset(props.offset)];\n        if (props.showArrow) {\n          middleware.push(index.arrowMiddleware({\n            arrowRef\n          }));\n        }\n        return middleware;\n      })\n    });\n    const zIndex = index$1.useZIndex().nextZIndex();\n    const ns = index$2.useNamespace(\"tooltip-v2\");\n    const side = vue.computed(() => {\n      return placement.value.split(\"-\")[0];\n    });\n    const contentStyle = vue.computed(() => {\n      return {\n        position: vue.unref(strategy),\n        top: `${vue.unref(y) || 0}px`,\n        left: `${vue.unref(x) || 0}px`,\n        zIndex\n      };\n    });\n    const arrowStyle = vue.computed(() => {\n      if (!props.showArrow) return {};\n      const {\n        arrow\n      } = vue.unref(middlewareData);\n      return {\n        [`--${ns.namespace.value}-tooltip-v2-arrow-x`]: `${arrow == null ? void 0 : arrow.x}px` || \"\",\n        [`--${ns.namespace.value}-tooltip-v2-arrow-y`]: `${arrow == null ? void 0 : arrow.y}px` || \"\"\n      };\n    });\n    const contentClass = vue.computed(() => [ns.e(\"content\"), ns.is(\"dark\", props.effect === \"dark\"), ns.is(vue.unref(strategy)), props.contentClass]);\n    vue.watch(arrowRef, () => update());\n    vue.watch(() => props.placement, val => placement.value = val);\n    vue.onMounted(() => {\n      vue.watch(() => props.reference || triggerRef.value, el => {\n        referenceRef.value = el || void 0;\n      }, {\n        immediate: true\n      });\n    });\n    vue.provide(constants.tooltipV2ContentKey, {\n      arrowRef\n    });\n    return (_ctx, _cache) => {\n      return vue.openBlock(), vue.createElementBlock(\"div\", {\n        ref_key: \"contentRef\",\n        ref: contentRef,\n        style: vue.normalizeStyle(vue.unref(contentStyle)),\n        \"data-tooltip-v2-root\": \"\"\n      }, [!_ctx.nowrap ? (vue.openBlock(), vue.createElementBlock(\"div\", {\n        key: 0,\n        \"data-side\": vue.unref(side),\n        class: vue.normalizeClass(vue.unref(contentClass))\n      }, [vue.renderSlot(_ctx.$slots, \"default\", {\n        contentStyle: vue.unref(contentStyle),\n        contentClass: vue.unref(contentClass)\n      }), vue.createVNode(vue.unref(visualHidden[\"default\"]), {\n        id: vue.unref(contentId),\n        role: \"tooltip\"\n      }, {\n        default: vue.withCtx(() => [_ctx.ariaLabel ? (vue.openBlock(), vue.createElementBlock(vue.Fragment, {\n          key: 0\n        }, [vue.createTextVNode(vue.toDisplayString(_ctx.ariaLabel), 1)], 64)) : vue.renderSlot(_ctx.$slots, \"default\", {\n          key: 1\n        })]),\n        _: 3\n      }, 8, [\"id\"]), vue.renderSlot(_ctx.$slots, \"arrow\", {\n        style: vue.normalizeStyle(vue.unref(arrowStyle)),\n        side: vue.unref(side)\n      })], 10, _hoisted_1)) : vue.createCommentVNode(\"v-if\", true)], 4);\n    };\n  }\n});\nvar TooltipV2Content = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"content.vue\"]]);\nexports[\"default\"] = TooltipV2Content;","map":{"version":3,"names":["name","triggerRef","contentId","vue","inject","constants","tooltipV2RootKey","placement","ref","props","strategy","arrowRef","referenceRef","contentRef","middlewareData","x","y","update","index","useFloating","middleware","computed","dom","offset","showArrow","push","arrowMiddleware","zIndex","index$1","useZIndex","nextZIndex","ns","index$2","useNamespace","side","value","split","contentStyle","position","unref","top","left","arrowStyle","arrow","namespace","contentClass","e","is","effect","watch","val","onMounted","reference","el","immediate","provide","tooltipV2ContentKey"],"sources":["../../../../../../packages/components/tooltip-v2/src/content.vue"],"sourcesContent":["<template>\n  <div ref=\"contentRef\" :style=\"contentStyle\" data-tooltip-v2-root>\n    <div v-if=\"!nowrap\" :data-side=\"side\" :class=\"contentClass\">\n      <slot :content-style=\"contentStyle\" :content-class=\"contentClass\" />\n      <el-visually-hidden :id=\"contentId\" role=\"tooltip\">\n        <template v-if=\"ariaLabel\">\n          {{ ariaLabel }}\n        </template>\n        <slot v-else />\n      </el-visually-hidden>\n      <slot name=\"arrow\" :style=\"arrowStyle\" :side=\"side\" />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, inject, onMounted, provide, ref, unref, watch } from 'vue'\nimport { offset } from '@floating-ui/dom'\nimport {\n  arrowMiddleware,\n  useFloating,\n  useNamespace,\n  useZIndex,\n} from '@element-plus/hooks'\nimport ElVisuallyHidden from '@element-plus/components/visual-hidden'\nimport { tooltipV2ContentKey, tooltipV2RootKey } from './constants'\nimport { tooltipV2ContentProps } from './content'\nimport { tooltipV2CommonProps } from './common'\n\nimport type { CSSProperties } from 'vue'\nimport type { Middleware } from '@floating-ui/dom'\n\ndefineOptions({\n  name: 'ElTooltipV2Content',\n})\n\nconst props = defineProps({ ...tooltipV2ContentProps, ...tooltipV2CommonProps })\n\nconst { triggerRef, contentId } = inject(tooltipV2RootKey)!\n\nconst placement = ref(props.placement)\nconst strategy = ref(props.strategy)\nconst arrowRef = ref<HTMLElement | null>(null)\n\nconst { referenceRef, contentRef, middlewareData, x, y, update } = useFloating({\n  placement,\n  strategy,\n  middleware: computed(() => {\n    const middleware: Middleware[] = [offset(props.offset)]\n\n    if (props.showArrow) {\n      middleware.push(\n        arrowMiddleware({\n          arrowRef,\n        })\n      )\n    }\n\n    return middleware\n  }),\n})\n\nconst zIndex = useZIndex().nextZIndex()\n\nconst ns = useNamespace('tooltip-v2')\n\nconst side = computed(() => {\n  return placement.value.split('-')[0]\n})\n\nconst contentStyle = computed<CSSProperties>(() => {\n  return {\n    position: unref(strategy),\n    top: `${unref(y) || 0}px`,\n    left: `${unref(x) || 0}px`,\n    zIndex,\n  }\n})\n\nconst arrowStyle = computed<CSSProperties>(() => {\n  if (!props.showArrow) return {}\n\n  const { arrow } = unref(middlewareData)\n\n  return {\n    [`--${ns.namespace.value}-tooltip-v2-arrow-x`]: `${arrow?.x}px` || '',\n    [`--${ns.namespace.value}-tooltip-v2-arrow-y`]: `${arrow?.y}px` || '',\n  }\n})\n\nconst contentClass = computed(() => [\n  ns.e('content'),\n  ns.is('dark', props.effect === 'dark'),\n  ns.is(unref(strategy)),\n  props.contentClass,\n])\n\nwatch(arrowRef, () => update())\n\nwatch(\n  () => props.placement,\n  (val) => (placement.value = val)\n)\n\nonMounted(() => {\n  watch(\n    () => props.reference || triggerRef.value,\n    (el) => {\n      referenceRef.value = el || undefined\n    },\n    {\n      immediate: true,\n    }\n  )\n})\n\nprovide(tooltipV2ContentKey, { arrowRef })\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}