{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nrequire('../../../hooks/index.js');\nvar index$1 = require('../../icon/index.js');\nvar iconsVue = require('@element-plus/icons-vue');\nrequire('../../../utils/index.js');\nvar item = require('./item.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nvar types = require('../../../utils/types.js');\nconst __default__ = vue.defineComponent({\n  name: \"ElStep\"\n});\nconst _sfc_main = vue.defineComponent({\n  ...__default__,\n  props: item.stepProps,\n  setup(__props) {\n    const props = __props;\n    const ns = index.useNamespace(\"step\");\n    const index$2 = vue.ref(-1);\n    const lineStyle = vue.ref({});\n    const internalStatus = vue.ref(\"\");\n    const parent = vue.inject(\"ElSteps\");\n    const currentInstance = vue.getCurrentInstance();\n    vue.onMounted(() => {\n      vue.watch([() => parent.props.active, () => parent.props.processStatus, () => parent.props.finishStatus], ([active]) => {\n        updateStatus(active);\n      }, {\n        immediate: true\n      });\n    });\n    vue.onBeforeUnmount(() => {\n      parent.removeStep(stepItemState.uid);\n    });\n    const currentStatus = vue.computed(() => {\n      return props.status || internalStatus.value;\n    });\n    const prevStatus = vue.computed(() => {\n      const prevStep = parent.steps.value[index$2.value - 1];\n      return prevStep ? prevStep.currentStatus : \"wait\";\n    });\n    const isCenter = vue.computed(() => {\n      return parent.props.alignCenter;\n    });\n    const isVertical = vue.computed(() => {\n      return parent.props.direction === \"vertical\";\n    });\n    const isSimple = vue.computed(() => {\n      return parent.props.simple;\n    });\n    const stepsCount = vue.computed(() => {\n      return parent.steps.value.length;\n    });\n    const isLast = vue.computed(() => {\n      var _a;\n      return ((_a = parent.steps.value[stepsCount.value - 1]) == null ? void 0 : _a.uid) === (currentInstance == null ? void 0 : currentInstance.uid);\n    });\n    const space = vue.computed(() => {\n      return isSimple.value ? \"\" : parent.props.space;\n    });\n    const containerKls = vue.computed(() => {\n      return [ns.b(), ns.is(isSimple.value ? \"simple\" : parent.props.direction), ns.is(\"flex\", isLast.value && !space.value && !isCenter.value), ns.is(\"center\", isCenter.value && !isVertical.value && !isSimple.value)];\n    });\n    const style = vue.computed(() => {\n      const style2 = {\n        flexBasis: types.isNumber(space.value) ? `${space.value}px` : space.value ? space.value : `${100 / (stepsCount.value - (isCenter.value ? 0 : 1))}%`\n      };\n      if (isVertical.value) return style2;\n      if (isLast.value) {\n        style2.maxWidth = `${100 / stepsCount.value}%`;\n      }\n      return style2;\n    });\n    const setIndex = val => {\n      index$2.value = val;\n    };\n    const calcProgress = status => {\n      const isWait = status === \"wait\";\n      const style2 = {\n        transitionDelay: `${isWait ? \"-\" : \"\"}${150 * index$2.value}ms`\n      };\n      const step = status === parent.props.processStatus || isWait ? 0 : 100;\n      style2.borderWidth = step && !isSimple.value ? \"1px\" : 0;\n      style2[parent.props.direction === \"vertical\" ? \"height\" : \"width\"] = `${step}%`;\n      lineStyle.value = style2;\n    };\n    const updateStatus = activeIndex => {\n      if (activeIndex > index$2.value) {\n        internalStatus.value = parent.props.finishStatus;\n      } else if (activeIndex === index$2.value && prevStatus.value !== \"error\") {\n        internalStatus.value = parent.props.processStatus;\n      } else {\n        internalStatus.value = \"wait\";\n      }\n      const prevChild = parent.steps.value[index$2.value - 1];\n      if (prevChild) prevChild.calcProgress(internalStatus.value);\n    };\n    const stepItemState = vue.reactive({\n      uid: currentInstance.uid,\n      currentStatus,\n      setIndex,\n      calcProgress\n    });\n    parent.addStep(stepItemState);\n    return (_ctx, _cache) => {\n      return vue.openBlock(), vue.createElementBlock(\"div\", {\n        style: vue.normalizeStyle(vue.unref(style)),\n        class: vue.normalizeClass(vue.unref(containerKls))\n      }, [vue.createCommentVNode(\" icon & line \"), vue.createElementVNode(\"div\", {\n        class: vue.normalizeClass([vue.unref(ns).e(\"head\"), vue.unref(ns).is(vue.unref(currentStatus))])\n      }, [!vue.unref(isSimple) ? (vue.openBlock(), vue.createElementBlock(\"div\", {\n        key: 0,\n        class: vue.normalizeClass(vue.unref(ns).e(\"line\"))\n      }, [vue.createElementVNode(\"i\", {\n        class: vue.normalizeClass(vue.unref(ns).e(\"line-inner\")),\n        style: vue.normalizeStyle(lineStyle.value)\n      }, null, 6)], 2)) : vue.createCommentVNode(\"v-if\", true), vue.createElementVNode(\"div\", {\n        class: vue.normalizeClass([vue.unref(ns).e(\"icon\"), vue.unref(ns).is(_ctx.icon || _ctx.$slots.icon ? \"icon\" : \"text\")])\n      }, [vue.renderSlot(_ctx.$slots, \"icon\", {}, () => [_ctx.icon ? (vue.openBlock(), vue.createBlock(vue.unref(index$1.ElIcon), {\n        key: 0,\n        class: vue.normalizeClass(vue.unref(ns).e(\"icon-inner\"))\n      }, {\n        default: vue.withCtx(() => [(vue.openBlock(), vue.createBlock(vue.resolveDynamicComponent(_ctx.icon)))]),\n        _: 1\n      }, 8, [\"class\"])) : vue.unref(currentStatus) === \"success\" ? (vue.openBlock(), vue.createBlock(vue.unref(index$1.ElIcon), {\n        key: 1,\n        class: vue.normalizeClass([vue.unref(ns).e(\"icon-inner\"), vue.unref(ns).is(\"status\")])\n      }, {\n        default: vue.withCtx(() => [vue.createVNode(vue.unref(iconsVue.Check))]),\n        _: 1\n      }, 8, [\"class\"])) : vue.unref(currentStatus) === \"error\" ? (vue.openBlock(), vue.createBlock(vue.unref(index$1.ElIcon), {\n        key: 2,\n        class: vue.normalizeClass([vue.unref(ns).e(\"icon-inner\"), vue.unref(ns).is(\"status\")])\n      }, {\n        default: vue.withCtx(() => [vue.createVNode(vue.unref(iconsVue.Close))]),\n        _: 1\n      }, 8, [\"class\"])) : !vue.unref(isSimple) ? (vue.openBlock(), vue.createElementBlock(\"div\", {\n        key: 3,\n        class: vue.normalizeClass(vue.unref(ns).e(\"icon-inner\"))\n      }, vue.toDisplayString(index$2.value + 1), 3)) : vue.createCommentVNode(\"v-if\", true)])], 2)], 2), vue.createCommentVNode(\" title & description \"), vue.createElementVNode(\"div\", {\n        class: vue.normalizeClass(vue.unref(ns).e(\"main\"))\n      }, [vue.createElementVNode(\"div\", {\n        class: vue.normalizeClass([vue.unref(ns).e(\"title\"), vue.unref(ns).is(vue.unref(currentStatus))])\n      }, [vue.renderSlot(_ctx.$slots, \"title\", {}, () => [vue.createTextVNode(vue.toDisplayString(_ctx.title), 1)])], 2), vue.unref(isSimple) ? (vue.openBlock(), vue.createElementBlock(\"div\", {\n        key: 0,\n        class: vue.normalizeClass(vue.unref(ns).e(\"arrow\"))\n      }, null, 2)) : (vue.openBlock(), vue.createElementBlock(\"div\", {\n        key: 1,\n        class: vue.normalizeClass([vue.unref(ns).e(\"description\"), vue.unref(ns).is(vue.unref(currentStatus))])\n      }, [vue.renderSlot(_ctx.$slots, \"description\", {}, () => [vue.createTextVNode(vue.toDisplayString(_ctx.description), 1)])], 2))], 2)], 6);\n    };\n  }\n});\nvar Step = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"item.vue\"]]);\nexports[\"default\"] = Step;","map":{"version":3,"names":["name","ns","index","useNamespace","index$2","vue","ref","lineStyle","internalStatus","parent","inject","currentInstance","getCurrentInstance","onMounted","watch","props","active","processStatus","finishStatus","updateStatus","immediate","onBeforeUnmount","removeStep","stepItemState","uid","currentStatus","computed","status","value","prevStatus","prevStep","steps","isCenter","alignCenter","isVertical","direction","isSimple","simple","stepsCount","length","isLast","_a","space","containerKls","b","is","style","style2","flexBasis","types","isNumber","maxWidth","setIndex","val","calcProgress","isWait","transitionDelay","step","borderWidth","activeIndex","prevChild","reactive"],"sources":["../../../../../../packages/components/steps/src/item.vue"],"sourcesContent":["<template>\n  <div :style=\"style\" :class=\"containerKls\">\n    <!-- icon & line -->\n    <div :class=\"[ns.e('head'), ns.is(currentStatus)]\">\n      <div v-if=\"!isSimple\" :class=\"ns.e('line')\">\n        <i :class=\"ns.e('line-inner')\" :style=\"lineStyle\" />\n      </div>\n\n      <div\n        :class=\"[ns.e('icon'), ns.is(icon || $slots.icon ? 'icon' : 'text')]\"\n      >\n        <slot name=\"icon\">\n          <el-icon v-if=\"icon\" :class=\"ns.e('icon-inner')\">\n            <component :is=\"icon\" />\n          </el-icon>\n          <el-icon\n            v-else-if=\"currentStatus === 'success'\"\n            :class=\"[ns.e('icon-inner'), ns.is('status')]\"\n          >\n            <Check />\n          </el-icon>\n          <el-icon\n            v-else-if=\"currentStatus === 'error'\"\n            :class=\"[ns.e('icon-inner'), ns.is('status')]\"\n          >\n            <Close />\n          </el-icon>\n          <div v-else-if=\"!isSimple\" :class=\"ns.e('icon-inner')\">\n            {{ index + 1 }}\n          </div>\n        </slot>\n      </div>\n    </div>\n    <!-- title & description -->\n    <div :class=\"ns.e('main')\">\n      <div :class=\"[ns.e('title'), ns.is(currentStatus)]\">\n        <slot name=\"title\">{{ title }}</slot>\n      </div>\n      <div v-if=\"isSimple\" :class=\"ns.e('arrow')\" />\n      <div v-else :class=\"[ns.e('description'), ns.is(currentStatus)]\">\n        <slot name=\"description\">{{ description }}</slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  computed,\n  getCurrentInstance,\n  inject,\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  ref,\n  watch,\n} from 'vue'\nimport { useNamespace } from '@element-plus/hooks'\nimport { ElIcon } from '@element-plus/components/icon'\nimport { Check, Close } from '@element-plus/icons-vue'\nimport { isNumber } from '@element-plus/utils'\nimport { stepProps } from './item'\n\nimport type { CSSProperties, Ref } from 'vue'\n\nexport interface IStepsProps {\n  space: number | string\n  active: number\n  direction: string\n  alignCenter: boolean\n  simple: boolean\n  finishStatus: string\n  processStatus: string\n}\n\nexport interface StepItemState {\n  uid: number\n  currentStatus: string\n  setIndex: (val: number) => void\n  calcProgress: (status: string) => void\n}\n\nexport interface IStepsInject {\n  props: IStepsProps\n  steps: Ref<StepItemState[]>\n  addStep: (item: StepItemState) => void\n  removeStep: (uid: number) => void\n}\n\ndefineOptions({\n  name: 'ElStep',\n})\n\nconst props = defineProps(stepProps)\nconst ns = useNamespace('step')\nconst index = ref(-1)\nconst lineStyle = ref({})\nconst internalStatus = ref('')\nconst parent = inject('ElSteps') as IStepsInject\nconst currentInstance = getCurrentInstance()\n\nonMounted(() => {\n  watch(\n    [\n      () => parent.props.active,\n      () => parent.props.processStatus,\n      () => parent.props.finishStatus,\n    ],\n    ([active]) => {\n      updateStatus(active)\n    },\n    { immediate: true }\n  )\n})\n\nonBeforeUnmount(() => {\n  parent.removeStep(stepItemState.uid)\n})\n\nconst currentStatus = computed(() => {\n  return props.status || internalStatus.value\n})\n\nconst prevStatus = computed(() => {\n  const prevStep = parent.steps.value[index.value - 1]\n  return prevStep ? prevStep.currentStatus : 'wait'\n})\n\nconst isCenter = computed(() => {\n  return parent.props.alignCenter\n})\n\nconst isVertical = computed(() => {\n  return parent.props.direction === 'vertical'\n})\n\nconst isSimple = computed(() => {\n  return parent.props.simple\n})\n\nconst stepsCount = computed(() => {\n  return parent.steps.value.length\n})\n\nconst isLast = computed(() => {\n  return parent.steps.value[stepsCount.value - 1]?.uid === currentInstance?.uid\n})\n\nconst space = computed(() => {\n  return isSimple.value ? '' : parent.props.space\n})\n\nconst containerKls = computed(() => {\n  return [\n    ns.b(),\n    ns.is(isSimple.value ? 'simple' : parent.props.direction),\n    ns.is('flex', isLast.value && !space.value && !isCenter.value),\n    ns.is('center', isCenter.value && !isVertical.value && !isSimple.value),\n  ]\n})\n\nconst style = computed(() => {\n  const style: CSSProperties = {\n    flexBasis: isNumber(space.value)\n      ? `${space.value}px`\n      : space.value\n      ? space.value\n      : `${100 / (stepsCount.value - (isCenter.value ? 0 : 1))}%`,\n  }\n  if (isVertical.value) return style\n  if (isLast.value) {\n    style.maxWidth = `${100 / stepsCount.value}%`\n  }\n  return style\n})\n\nconst setIndex = (val: number) => {\n  index.value = val\n}\n\nconst calcProgress = (status: string) => {\n  const isWait = status === 'wait'\n  const style: CSSProperties = {\n    transitionDelay: `${isWait ? '-' : ''}${150 * index.value}ms`,\n  }\n  const step = status === parent.props.processStatus || isWait ? 0 : 100\n\n  style.borderWidth = step && !isSimple.value ? '1px' : 0\n  style[parent.props.direction === 'vertical' ? 'height' : 'width'] = `${step}%`\n  lineStyle.value = style\n}\n\nconst updateStatus = (activeIndex: number) => {\n  if (activeIndex > index.value) {\n    internalStatus.value = parent.props.finishStatus\n  } else if (activeIndex === index.value && prevStatus.value !== 'error') {\n    internalStatus.value = parent.props.processStatus\n  } else {\n    internalStatus.value = 'wait'\n  }\n  const prevChild = parent.steps.value[index.value - 1]\n  if (prevChild) prevChild.calcProgress(internalStatus.value)\n}\n\nconst stepItemState = reactive({\n  uid: currentInstance!.uid,\n  currentStatus,\n  setIndex,\n  calcProgress,\n})\n\nparent.addStep(stepItemState)\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}